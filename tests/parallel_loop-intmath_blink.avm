START:
BINDAI N1 15
BINDAO N3 10
# BINDDI N2 2

SPAWNVM BLINK_START 20 8
SPAWNVM LOOPINTMATH 40 16

STOP:
UJMP STOP

BLINK_START:
CALL LEDON
NOOP
CALL LEDOFF
NOOP
UJMP BLINK_START

LEDON:
POP_REGS_16 0,0
PUSH_CONST_8 255
MOV_SPREL2_REG_8 0 8
MOV_REG2_MEM_8 8 N3
RET

LEDOFF:
POP_REGS_16 0,0
PUSH_CONST_8 0
MOV_SPREL2_REG_8 0 8
MOV_REG2_MEM_8 8 N3
RET

LOOPINTMATH:
#PUSH_CONST_8 84
#MOV_SPREL2_REG_8 0 4
#PRINT_AS 4,7

MOV_MEM2_REG_16 N1 13
MOV_MEM2_REG_16 N2 14
SUB_INT_8 13, 14

PUSH_CONST_8 5
PUSH_CONST_8 3

CALL POW
NOOP
UJMP LOOPINTMATH
NOOP
NOOP

POW:
POP_REGS_16 0,0
PUSH_CONST_8 0
PUSH_CONST_8 1
LOOP_START:
MOV_SPREL2_REG_8 0 10
MOV_SPREL2_REG_8 3 11
MOV_SPREL2_REG_8 1 1
MOV_SPREL2_REG_8 2 2

CMP_INT_8 1,2
JEQ BAILOUT
INC_SPREL_UINT_8 1
MUL_UINT_8 10,11
MOV_REG2_SPREL_8 10 0
UJMP LOOP_START
BAILOUT:
SP_ADJ 1
MOV_REG2_SPREL_8 10 0
RET
#END LOOPINTMATH



DATASEG:
2$N1:
2$N2:
2$N3:
